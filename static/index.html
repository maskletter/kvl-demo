<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" />
	<title>Kvl项目演示</title>
	<link rel="stylesheet" type="text/css" href="mdui/css/mdui.min.css">
	<style type="text/css">
		.container{ margin: 50px auto;max-width: 1000px;padding: 0 30px; }
		.userlogin-container,.userinfo-container{ position: relative; }
		.loading{ position: absolute;width: 100%;height: 100%;z-index: 788;background: rgba(255,255,255,0.8);top: 0px;display: flex;justify-content: center;align-items: center;left: 0px; }
		.loading[loading=false]{display: none;}
	</style>
</head>
<body>
	<div class="container">
		<div class="mdui-typo-display-2">Kvl项目演示</div><br><br>
		<div class="mdui-panel" mdui-panel>
  
		  <div class="mdui-panel-item">
		    <div class="mdui-panel-item-header">
		      <div class="mdui-panel-item-title">用户登陆</div>
		      <div class="mdui-panel-item-summary">User Login</div>
		      <i class="mdui-panel-item-arrow mdui-icon material-icons">keyboard_arrow_down</i>
		    </div>
		    <div class="mdui-panel-item-body">
		    	
			  <div class="userlogin-container" >
			  	 <div class="mdui-textfield mdui-textfield-floating-label">
					  <label class="mdui-textfield-label">用户名</label>
					  <input class="mdui-textfield-input" id="username" type="text"/>
				  </div>
			      <div class="mdui-textfield mdui-textfield-floating-label">
					  <label class="mdui-textfield-label">密码</label>
					  <input class="mdui-textfield-input" id="password" type="password"/>
				  </div>
			      <div class="mdui-textfield mdui-textfield-floating-label">
					  <label class="mdui-textfield-label">手机号(可为空)</label>
					  <input class="mdui-textfield-input" id="phone" type="number"/>
				  </div>
				  <pre id="login-info">
				  	
				  </pre>
				  <div class="loading" loading='false'>
				  	<div class="mdui-spinner"></div>
				  </div>
			  </div>
		      <div class="mdui-panel-item-actions">
		        <button class="mdui-btn mdui-ripple" mdui-panel-item-close>关闭</button>
		        <button class="mdui-btn mdui-ripple" id="login-confirm">确定</button>
		      </div>
		    </div>
		  </div>
		  
		  <div class="mdui-panel-item">
		    <div class="mdui-panel-item-header">
		      <div class="mdui-panel-item-title">获取用户信息</div>
		      <div class="mdui-panel-item-summary">User Info</div>
		      <i class="mdui-panel-item-arrow mdui-icon material-icons">keyboard_arrow_down</i>
		    </div>
		    <div class="mdui-panel-item-body">
		      <div class="userinfo-container" >
			  	  <button class="mdui-btn mdui-btn-raised mdui-ripple" id="info-confirm">获取用户信息</button>
				  <pre id="user-info">
				  	
				  </pre>
				  <div class="loading" loading='false'>
				  	<div class="mdui-spinner"></div>
				  </div>
			  </div>
		      <div class="mdui-panel-item-actions">
		        <button class="mdui-btn mdui-ripple" mdui-panel-item-close>关闭</button>
		        <!-- <button class="mdui-btn mdui-ripple" id="info-confirm">确定</button> -->
		      </div>
		    </div>
		  </div>
		  
	
		  
		</div>
		
	</div>
		
<script type="text/javascript" src="mdui/js/mdui.min.js"></script>
<script type="text/javascript">
	window.$ = mdui.JQ;
	$('#login-confirm').on('click', function(){
		const $loading = $('.userlogin-container .loading').attr('loading', true);
			
		$.ajax({ 
			method: 'GET', 
			data: { 
				username: $('#username').val(), 
				password: $('#password').val(), 
				phone: $('#phone').val()|| '' 
			}, 
			url: '/user/login',
			dataType: 'json',
			success: function(result){
				console.log(result)
				$('#login-info').html(JSON.stringify(result, null, 2))
				$loading.attr('loading', false);
			}
		})
	})
	$('#info-confirm').on('click', function(){
		// if(!$('#userId').val()){
		// 	return mdui.alert('请输入用户id')
		// }
		const $loading = $('.userinfo-container .loading').attr('loading', true);
		$.ajax({
			data: {
				userId: $('#userId').val()
			},
			url: '/user/userinfo',
			dataType: 'json',
			success: function(result){
				console.log(result)
				$('#user-info').html(JSON.stringify(result, null, 2))
				$loading.attr('loading', false);
			}
		})
	})
		
</script>
</body>
</html>